# minificação da api imagetracejs
Minificação da api jankovicsandras / imagetracerjs (a mesma que o inkscape usa)

Link de api: https://github.com/jankovicsandras/imagetracerjs

código minificado:

```
(function(){"use strict";function n(){var n=this;this.versionnumber="1.2.6";this.imageToSVG=function(t,i,r){r=n.checkoptions(r);n.loadImage(t,function(t){i(n.imagedataToSVG(n.getImgdata(t),r))},r)};this.imagedataToSVG=function(t,i){i=n.checkoptions(i);var r=n.imagedataToTracedata(t,i);return n.getsvgstring(r,i)};this.imageToTracedata=function(t,i,r){r=n.checkoptions(r);n.loadImage(t,function(t){i(n.imagedataToTracedata(n.getImgdata(t),r))},r)};this.imagedataToTracedata=function(t,i){var r,f,u,o,e;if(i=n.checkoptions(i),r=n.colorquantization(t,i),i.layering===0)for(f={layers:[],palette:r.palette,width:r.array[0].length-2,height:r.array.length-2},u=0;u<r.palette.length;u++)o=n.batchtracepaths(n.internodes(n.pathscan(n.layeringstep(r,u),i.pathomit),i),i.ltres,i.qtres),f.layers.push(o);else{e=n.layering(r);i.layercontainerid&&n.drawLayers(e,n.specpalette,i.scale,i.layercontainerid);var s=n.batchpathscan(e,i.pathomit),h=n.batchinternodes(s,i),f={layers:n.batchtracelayers(h,i.ltres,i.qtres),palette:r.palette,width:t.width,height:t.height}}return f};this.optionpresets={"default":{corsenabled:!1,ltres:1,qtres:1,pathomit:8,rightangleenhance:!0,colorsampling:2,numberofcolors:16,mincolorratio:0,colorquantcycles:3,layering:0,strokewidth:1,linefilter:!1,scale:1,roundcoords:1,viewbox:!1,desc:!1,lcpr:0,qcpr:0,blurradius:0,blurdelta:20},posterized1:{colorsampling:0,numberofcolors:2},posterized2:{numberofcolors:4,blurradius:5},curvy:{ltres:.01,linefilter:!0,rightangleenhance:!1},sharp:{qtres:.01,linefilter:!1},detailed:{pathomit:0,roundcoords:2,ltres:.5,qtres:.5,numberofcolors:64},smoothed:{blurradius:5,blurdelta:64},grayscale:{colorsampling:0,colorquantcycles:1,numberofcolors:7},fixedpalette:{colorsampling:0,colorquantcycles:1,numberofcolors:27},randomsampling1:{colorsampling:1,numberofcolors:8},randomsampling2:{colorsampling:1,numberofcolors:64},artistic1:{colorsampling:0,colorquantcycles:1,pathomit:0,blurradius:5,blurdelta:64,ltres:.01,linefilter:!0,numberofcolors:16,strokewidth:2},artistic2:{qtres:.01,colorsampling:0,colorquantcycles:1,numberofcolors:4,strokewidth:0},artistic3:{qtres:10,ltres:10,numberofcolors:8},artistic4:{qtres:10,ltres:10,numberofcolors:64,blurradius:5,blurdelta:256,strokewidth:2},posterized3:{ltres:1,qtres:1,pathomit:20,rightangleenhance:!0,colorsampling:0,numberofcolors:3,mincolorratio:0,colorquantcycles:3,blurradius:3,blurdelta:20,strokewidth:0,linefilter:!1,roundcoords:1,pal:[{r:0,g:0,b:100,a:255},{r:255,g:255,b:255,a:255}]}};this.checkoptions=function(t){var r,i;for(t=t||{},typeof t=="string"&&(t=t.toLowerCase(),t=n.optionpresets[t]?n.optionpresets[t]:{}),r=Object.keys(n.optionpresets["default"]),i=0;i<r.length;i++)t.hasOwnProperty(r[i])||(t[r[i]]=n.optionpresets["default"][r[i]]);return t};this.colorquantization=function(t,i){var v=[],f=0,p,w,c,e=[],y=t.width*t.height,o,s,r,a,u,l,h;if(t.data.length<y*4){for(l=new Uint8ClampedArray(y*4),h=0;h<y;h++)l[h*4]=t.data[h*3],l[h*4+1]=t.data[h*3+1],l[h*4+2]=t.data[h*3+2],l[h*4+3]=255;t.data=l}for(s=0;s<t.height+2;s++)for(v[s]=[],o=0;o<t.width+2;o++)v[s][o]=-1;for(u=i.pal?i.pal:i.colorsampling===0?n.generatepalette(i.numberofcolors):i.colorsampling===1?n.samplepalette(i.numberofcolors,t):n.samplepalette2(i.numberofcolors,t),i.blurradius>0&&(t=n.blur(t,i.blurradius,i.blurdelta)),a=0;a<i.colorquantcycles;a++){if(a>0)for(r=0;r<u.length;r++)e[r].n>0&&(u[r]={r:Math.floor(e[r].r/e[r].n),g:Math.floor(e[r].g/e[r].n),b:Math.floor(e[r].b/e[r].n),a:Math.floor(e[r].a/e[r].n)}),e[r].n/y<i.mincolorratio&&a<i.colorquantcycles-1&&(u[r]={r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)});for(o=0;o<u.length;o++)e[o]={r:0,g:0,b:0,a:0,n:0};for(s=0;s<t.height;s++)for(o=0;o<t.width;o++){for(f=(s*t.width+o)*4,c=0,w=1024,r=0;r<u.length;r++)p=(u[r].r>t.data[f]?u[r].r-t.data[f]:t.data[f]-u[r].r)+(u[r].g>t.data[f+1]?u[r].g-t.data[f+1]:t.data[f+1]-u[r].g)+(u[r].b>t.data[f+2]?u[r].b-t.data[f+2]:t.data[f+2]-u[r].b)+(u[r].a>t.data[f+3]?u[r].a-t.data[f+3]:t.data[f+3]-u[r].a),p<w&&(w=p,c=r);e[c].r+=t.data[f];e[c].g+=t.data[f+1];e[c].b+=t.data[f+2];e[c].a+=t.data[f+3];e[c].n++;v[s+1][o+1]=c}}return{array:v,palette:u}};this.samplepalette=function(n,t){for(var i,r=[],u=0;u<n;u++)i=Math.floor(Math.random()*t.data.length/4)*4,r.push({r:t.data[i],g:t.data[i+1],b:t.data[i+2],a:t.data[i+3]});return r};this.samplepalette2=function(n,t){for(var r,i,u=[],f=Math.ceil(Math.sqrt(n)),o=Math.ceil(n/f),s=t.width/(f+1),h=t.height/(o+1),e=0;e<o;e++)for(r=0;r<f;r++)if(u.length===n)break;else i=Math.floor((e+1)*h*t.width+(r+1)*s)*4,u.push({r:t.data[i],g:t.data[i+1],b:t.data[i+2],a:t.data[i+3]});return u};this.generatepalette=function(n){var u=[],t,f,e,o,r;if(n<8)for(o=Math.floor(255/(n-1)),r=0;r<n;r++)u.push({r:r*o,g:r*o,b:r*o,a:255});else{var i=Math.floor(Math.pow(n,1/3)),s=Math.floor(255/(i-1)),h=n-i*i*i;for(t=0;t<i;t++)for(f=0;f<i;f++)for(e=0;e<i;e++)u.push({r:t*s,g:f*s,b:e*s,a:255});for(t=0;t<h;t++)u.push({r:Math.floor(Math.random()*255),g:Math.floor(Math.random()*255),b:Math.floor(Math.random()*255),a:Math.floor(Math.random()*255)})}return u};this.layering=function(n){for(var u=[],r=0,c=n.array.length,l=n.array[0].length,a,e,v,o,s,y,h,p,i,t,f=0;f<n.palette.length;f++)for(u[f]=[],t=0;t<c;t++)for(u[f][t]=[],i=0;i<l;i++)u[f][t][i]=0;for(t=1;t<c-1;t++)for(i=1;i<l-1;i++)r=n.array[t][i],a=n.array[t-1][i-1]===r?1:0,e=n.array[t-1][i]===r?1:0,v=n.array[t-1][i+1]===r?1:0,o=n.array[t][i-1]===r?1:0,s=n.array[t][i+1]===r?1:0,y=n.array[t+1][i-1]===r?1:0,h=n.array[t+1][i]===r?1:0,p=n.array[t+1][i+1]===r?1:0,u[r][t+1][i+1]=1+s*2+p*4+h*8,o||(u[r][t+1][i]=2+h*4+y*8),e||(u[r][t][i+1]=0+v*2+s*4+8),a||(u[r][t][i]=0+e*2+4+o*8);return u};this.layeringstep=function(n,t){for(var u=[],f=n.array.length,e=n.array[0].length,r,i=0;i<f;i++)for(u[i]=[],r=0;r<e;r++)u[i][r]=0;for(i=1;i<f;i++)for(r=1;r<e;r++)u[i][r]=(n.array[i-1][r-1]===t?1:0)+(n.array[i-1][r]===t?2:0)+(n.array[i][r-1]===t?8:0)+(n.array[i][r]===t?4:0);return u};this.pointinpoly=function(n,t){for(var r=!1,i=0,u=t.length-1;i<t.length;u=i++)r=t[i].y>n.y!=t[u].y>n.y&&n.x<(t[u].x-t[i].x)*(n.y-t[i].y)/(t[u].y-t[i].y)+t[i].x?!r:r;return r};this.pathscan_combined_lookup=[[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[13,3,0,1],[13,2,-1,0],[7,1,0,-1],[7,0,1,0]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[0,3,0,1],[0,2,-1,0],[-1,-1,-1,-1],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[0,1,0,-1],[-1,-1,-1,-1],[0,3,0,1]],[[11,1,0,-1],[14,0,1,0],[14,3,0,1],[11,2,-1,0]],[[-1,-1,-1,-1],[0,0,1,0],[0,3,0,1],[-1,-1,-1,-1]],[[0,0,1,0],[-1,-1,-1,-1],[0,2,-1,0],[-1,-1,-1,-1]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[0,1,0,-1],[0,0,1,0]],[[0,1,0,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[0,2,-1,0]],[[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1],[-1,-1,-1,-1]]];this.pathscan=function(t,i){for(var s,p,w,o,r=[],u=0,h=0,f=0,e=0,b=t[0].length,k=t.length,a=0,v=!0,y=!1,l,c=0;c<k;c++)for(s=0;s<b;s++)if(t[c][s]==4||t[c][s]==11)for(f=s,e=c,r[u]={},r[u].points=[],r[u].boundingbox=[f,e,f,e],r[u].holechildren=[],v=!1,h=0,y=t[c][s]==11,a=1;!v;){if(r[u].points[h]={},r[u].points[h].x=f-1,r[u].points[h].y=e-1,r[u].points[h].t=t[e][f],f-1<r[u].boundingbox[0]&&(r[u].boundingbox[0]=f-1),f-1>r[u].boundingbox[2]&&(r[u].boundingbox[2]=f-1),e-1<r[u].boundingbox[1]&&(r[u].boundingbox[1]=e-1),e-1>r[u].boundingbox[3]&&(r[u].boundingbox[3]=e-1),l=n.pathscan_combined_lookup[t[e][f]][a],t[e][f]=l[0],a=l[1],f+=l[2],e+=l[3],f-1===r[u].points[0].x&&e-1===r[u].points[0].y)if(v=!0,r[u].points.length<i)r.pop();else{if(r[u].isholepath=y?!0:!1,y){for(p=0,w=[-1,-1,b+1,k+1],o=0;o<u;o++)!r[o].isholepath&&n.boundingboxincludes(r[o].boundingbox,r[u].boundingbox)&&n.boundingboxincludes(w,r[o].boundingbox)&&n.pointinpoly(r[u].points[0],r[o].points)&&(p=o,w=r[o].boundingbox);r[p].holechildren.push(u)}u++}h++}return r};this.boundingboxincludes=function(n,t){return n[0]<t[0]&&n[1]<t[1]&&n[2]>t[2]&&n[3]>t[3]};this.batchpathscan=function(t,i){var u=[];for(var r in t)t.hasOwnProperty(r)&&(u[r]=n.pathscan(t[r],i));return u};this.internodes=function(t,i){for(var f=[],o=0,e=0,s=0,h=0,c=0,u,r=0;r<t.length;r++)for(f[r]={},f[r].points=[],f[r].boundingbox=t[r].boundingbox,f[r].holechildren=t[r].holechildren,f[r].isholepath=t[r].isholepath,o=t[r].points.length,u=0;u<o;u++)e=(u+1)%o,s=(u+2)%o,h=(u-1+o)%o,c=(u-2+o)%o,i.rightangleenhance&&n.testrightangle(t[r],c,h,u,e,s)&&(f[r].points.length>0&&(f[r].points[f[r].points.length-1].linesegment=n.getdirection(f[r].points[f[r].points.length-1].x,f[r].points[f[r].points.length-1].y,t[r].points[u].x,t[r].points[u].y)),f[r].points.push({x:t[r].points[u].x,y:t[r].points[u].y,linesegment:n.getdirection(t[r].points[u].x,t[r].points[u].y,(t[r].points[u].x+t[r].points[e].x)/2,(t[r].points[u].y+t[r].points[e].y)/2)})),f[r].points.push({x:(t[r].points[u].x+t[r].points[e].x)/2,y:(t[r].points[u].y+t[r].points[e].y)/2,linesegment:n.getdirection((t[r].points[u].x+t[r].points[e].x)/2,(t[r].points[u].y+t[r].points[e].y)/2,(t[r].points[e].x+t[r].points[s].x)/2,(t[r].points[e].y+t[r].points[s].y)/2)});return f};this.testrightangle=function(n,t,i,r,u,f){return n.points[r].x===n.points[t].x&&n.points[r].x===n.points[i].x&&n.points[r].y===n.points[u].y&&n.points[r].y===n.points[f].y||n.points[r].y===n.points[t].y&&n.points[r].y===n.points[i].y&&n.points[r].x===n.points[u].x&&n.points[r].x===n.points[f].x};this.getdirection=function(n,t,i,r){return n<i?t<r?1:t>r?7:0:n>i?t<r?3:t>r?5:4:t<r?2:t>r?6:8};this.batchinternodes=function(t,i){var u=[];for(var r in t)t.hasOwnProperty(r)&&(u[r]=n.internodes(t[r],i));return u};this.tracepath=function(t,i,r){var e=0,s,o,u,f={};for(f.segments=[],f.boundingbox=t.boundingbox,f.holechildren=t.holechildren,f.isholepath=t.isholepath;e<t.points.length;){for(s=t.points[e].linesegment,o=-1,u=e+1;(t.points[u].linesegment===s||t.points[u].linesegment===o||o===-1)&&u<t.points.length-1;)t.points[u].linesegment!==s&&o===-1&&(o=t.points[u].linesegment),u++;u===t.points.length-1&&(u=0);f.segments=f.segments.concat(n.fitseq(t,i,r,e,u));e=u>0?u:t.points.length}return f};this.fitseq=function(t,i,r,u,f){var p,g;if(f>t.points.length||f<0)return[];var d=u,a=0,v=!0,h,c,s,l=f-u;l<0&&(l+=t.points.length);for(var it=(t.points[f].x-t.points[u].x)/l,rt=(t.points[f].y-t.points[u].y)/l,e=(u+1)%t.points.length,y;e!=f;)y=e-u,y<0&&(y+=t.points.length),h=t.points[u].x+it*y,c=t.points[u].y+rt*y,s=(t.points[e].x-h)*(t.points[e].x-h)+(t.points[e].y-c)*(t.points[e].y-c),s>i&&(v=!1),s>a&&(d=e,a=s),e=(e+1)%t.points.length;if(v)return[{type:"L",x1:t.points[u].x,y1:t.points[u].y,x2:t.points[f].x,y2:t.points[f].y}];p=d;v=!0;a=0;var o=(p-u)/l,w=(1-o)*(1-o),b=2*(1-o)*o,k=o*o,nt=(w*t.points[u].x+k*t.points[f].x-t.points[p].x)/-b,tt=(w*t.points[u].y+k*t.points[f].y-t.points[p].y)/-b;for(e=u+1;e!=f;)o=(e-u)/l,w=(1-o)*(1-o),b=2*(1-o)*o,k=o*o,h=w*t.points[u].x+b*nt+k*t.points[f].x,c=w*t.points[u].y+b*tt+k*t.points[f].y,s=(t.points[e].x-h)*(t.points[e].x-h)+(t.points[e].y-c)*(t.points[e].y-c),s>r&&(v=!1),s>a&&(d=e,a=s),e=(e+1)%t.points.length;return v?[{type:"Q",x1:t.points[u].x,y1:t.points[u].y,x2:nt,y2:tt,x3:t.points[f].x,y3:t.points[f].y}]:(g=p,n.fitseq(t,i,r,u,g).concat(n.fitseq(t,i,r,g,f)))};this.batchtracepaths=function(t,i,r){var u=[];for(var f in t)t.hasOwnProperty(f)&&u.push(n.tracepath(t[f],i,r));return u};this.batchtracelayers=function(t,i,r){var f=[];for(var u in t)t.hasOwnProperty(u)&&(f[u]=n.batchtracepaths(t[u],i,r));return f};this.roundtodec=function(n,t){return+n.toFixed(t)};this.svgpathstring=function(t,i,r,u){var c=t.layers[i],o=c[r],s="",f,h,e;if(u.linefilter&&o.segments.length<3)return s;if(s="<path "+(u.desc?'desc="l '+i+" p "+r+'" ':"")+n.tosvgcolorstr(t.palette[i],u)+'d="',u.roundcoords===-1){for(s+="M "+o.segments[0].x1*u.scale+" "+o.segments[0].y1*u.scale+" ",f=0;f<o.segments.length;f++)s+=o.segments[f].type+" "+o.segments[f].x2*u.scale+" "+o.segments[f].y2*u.scale+" ",o.segments[f].hasOwnProperty("x3")&&(s+=o.segments[f].x3*u.scale+" "+o.segments[f].y3*u.scale+" ");s+="Z "}else{for(s+="M "+n.roundtodec(o.segments[0].x1*u.scale,u.roundcoords)+" "+n.roundtodec(o.segments[0].y1*u.scale,u.roundcoords)+" ",f=0;f<o.segments.length;f++)s+=o.segments[f].type+" "+n.roundtodec(o.segments[f].x2*u.scale,u.roundcoords)+" "+n.roundtodec(o.segments[f].y2*u.scale,u.roundcoords)+" ",o.segments[f].hasOwnProperty("x3")&&(s+=n.roundtodec(o.segments[f].x3*u.scale,u.roundcoords)+" "+n.roundtodec(o.segments[f].y3*u.scale,u.roundcoords)+" ");s+="Z "}for(h=0;h<o.holechildren.length;h++){if(e=c[o.holechildren[h]],u.roundcoords===-1)for(s+=e.segments[e.segments.length-1].hasOwnProperty("x3")?"M "+e.segments[e.segments.length-1].x3*u.scale+" "+e.segments[e.segments.length-1].y3*u.scale+" ":"M "+e.segments[e.segments.length-1].x2*u.scale+" "+e.segments[e.segments.length-1].y2*u.scale+" ",f=e.segments.length-1;f>=0;f--)s+=e.segments[f].type+" ",e.segments[f].hasOwnProperty("x3")&&(s+=e.segments[f].x2*u.scale+" "+e.segments[f].y2*u.scale+" "),s+=e.segments[f].x1*u.scale+" "+e.segments[f].y1*u.scale+" ";else for(s+=e.segments[e.segments.length-1].hasOwnProperty("x3")?"M "+n.roundtodec(e.segments[e.segments.length-1].x3*u.scale)+" "+n.roundtodec(e.segments[e.segments.length-1].y3*u.scale)+" ":"M "+n.roundtodec(e.segments[e.segments.length-1].x2*u.scale)+" "+n.roundtodec(e.segments[e.segments.length-1].y2*u.scale)+" ",f=e.segments.length-1;f>=0;f--)s+=e.segments[f].type+" ",e.segments[f].hasOwnProperty("x3")&&(s+=n.roundtodec(e.segments[f].x2*u.scale)+" "+n.roundtodec(e.segments[f].y2*u.scale)+" "),s+=n.roundtodec(e.segments[f].x1*u.scale)+" "+n.roundtodec(e.segments[f].y1*u.scale)+" ";s+="Z "}if(s+='" />',u.lcpr||u.qcpr){for(f=0;f<o.segments.length;f++)o.segments[f].hasOwnProperty("x3")&&u.qcpr&&(s+='<circle cx="'+o.segments[f].x2*u.scale+'" cy="'+o.segments[f].y2*u.scale+'" r="'+u.qcpr+'" fill="cyan" stroke-width="'+u.qcpr*.2+'" stroke="black" />',s+='<circle cx="'+o.segments[f].x3*u.scale+'" cy="'+o.segments[f].y3*u.scale+'" r="'+u.qcpr+'" fill="white" stroke-width="'+u.qcpr*.2+'" stroke="black" />',s+='<line x1="'+o.segments[f].x1*u.scale+'" y1="'+o.segments[f].y1*u.scale+'" x2="'+o.segments[f].x2*u.scale+'" y2="'+o.segments[f].y2*u.scale+'" stroke-width="'+u.qcpr*.2+'" stroke="cyan" />',s+='<line x1="'+o.segments[f].x2*u.scale+'" y1="'+o.segments[f].y2*u.scale+'" x2="'+o.segments[f].x3*u.scale+'" y2="'+o.segments[f].y3*u.scale+'" stroke-width="'+u.qcpr*.2+'" stroke="cyan" />'),!o.segments[f].hasOwnProperty("x3")&&u.lcpr&&(s+='<circle cx="'+o.segments[f].x2*u.scale+'" cy="'+o.segments[f].y2*u.scale+'" r="'+u.lcpr+'" fill="white" stroke-width="'+u.lcpr*.2+'" stroke="black" />');for(h=0;h<o.holechildren.length;h++)for(e=c[o.holechildren[h]],f=0;f<e.segments.length;f++)e.segments[f].hasOwnProperty("x3")&&u.qcpr&&(s+='<circle cx="'+e.segments[f].x2*u.scale+'" cy="'+e.segments[f].y2*u.scale+'" r="'+u.qcpr+'" fill="cyan" stroke-width="'+u.qcpr*.2+'" stroke="black" />',s+='<circle cx="'+e.segments[f].x3*u.scale+'" cy="'+e.segments[f].y3*u.scale+'" r="'+u.qcpr+'" fill="white" stroke-width="'+u.qcpr*.2+'" stroke="black" />',s+='<line x1="'+e.segments[f].x1*u.scale+'" y1="'+e.segments[f].y1*u.scale+'" x2="'+e.segments[f].x2*u.scale+'" y2="'+e.segments[f].y2*u.scale+'" stroke-width="'+u.qcpr*.2+'" stroke="cyan" />',s+='<line x1="'+e.segments[f].x2*u.scale+'" y1="'+e.segments[f].y2*u.scale+'" x2="'+e.segments[f].x3*u.scale+'" y2="'+e.segments[f].y3*u.scale+'" stroke-width="'+u.qcpr*.2+'" stroke="cyan" />'),!e.segments[f].hasOwnProperty("x3")&&u.lcpr&&(s+='<circle cx="'+e.segments[f].x2*u.scale+'" cy="'+e.segments[f].y2*u.scale+'" r="'+u.lcpr+'" fill="white" stroke-width="'+u.lcpr*.2+'" stroke="black" />')}return s};this.getsvgstring=function(t,i){var r,u;i=n.checkoptions(i);var f=t.width*i.scale,e=t.height*i.scale,o="<svg "+(i.viewbox?'viewBox="0 0 '+f+" "+e+'" ':'width="'+f+'" height="'+e+'" ')+'version="1.1" xmlns="http://www.w3.org/2000/svg" desc="Created with imagetracer.js version '+n.versionnumber+'" >';for(r=0;r<t.layers.length;r++)for(u=0;u<t.layers[r].length;u++)t.layers[r][u].isholepath||(o+=n.svgpathstring(t,r,u,i));return o+"<\/svg>"};this.compareNumbers=function(n,t){return n-t};this.torgbastr=function(n){return"rgba("+n.r+","+n.g+","+n.b+","+n.a+")"};this.tosvgcolorstr=function(n,t){return'fill="rgb('+n.r+","+n.g+","+n.b+')" stroke="rgb('+n.r+","+n.g+","+n.b+')" stroke-width="'+t.strokewidth+'" opacity="'+n.a/255+'" '};this.appendSVGString=function(n,t){var i;t?(i=document.getElementById(t),i||(i=document.createElement("div"),i.id=t,document.body.appendChild(i))):(i=document.createElement("div"),document.body.appendChild(i));i.innerHTML+=n};this.gks=[[.27901,.44198,.27901],[.135336,.228569,.272192,.228569,.135336],[.086776,.136394,.178908,.195843,.178908,.136394,.086776],[.063327,.093095,.122589,.144599,.152781,.144599,.122589,.093095,.063327],[.049692,.069304,.089767,.107988,.120651,.125194,.120651,.107988,.089767,.069304,.049692]];this.blur=function(t,i,r){var o,s,f,w,u,l,a,v,y,h,e={width:t.width,height:t.height,data:[]},c,p;if(i=Math.floor(i),i<1)return t;for(i>5&&(i=5),r=Math.abs(r),r>1024&&(r=1024),c=n.gks[i-1],s=0;s<t.height;s++)for(o=0;o<t.width;o++){for(l=0,a=0,v=0,y=0,h=0,f=-i;f<i+1;f++)o+f>0&&o+f<t.width&&(u=(s*t.width+o+f)*4,l+=t.data[u]*c[f+i],a+=t.data[u+1]*c[f+i],v+=t.data[u+2]*c[f+i],y+=t.data[u+3]*c[f+i],h+=c[f+i]);u=(s*t.width+o)*4;e.data[u]=Math.floor(l/h);e.data[u+1]=Math.floor(a/h);e.data[u+2]=Math.floor(v/h);e.data[u+3]=Math.floor(y/h)}for(p=new Uint8ClampedArray(e.data),s=0;s<t.height;s++)for(o=0;o<t.width;o++){for(l=0,a=0,v=0,y=0,h=0,f=-i;f<i+1;f++)s+f>0&&s+f<t.height&&(u=((s+f)*t.width+o)*4,l+=p[u]*c[f+i],a+=p[u+1]*c[f+i],v+=p[u+2]*c[f+i],y+=p[u+3]*c[f+i],h+=c[f+i]);u=(s*t.width+o)*4;e.data[u]=Math.floor(l/h);e.data[u+1]=Math.floor(a/h);e.data[u+2]=Math.floor(v/h);e.data[u+3]=Math.floor(y/h)}for(s=0;s<t.height;s++)for(o=0;o<t.width;o++)u=(s*t.width+o)*4,w=Math.abs(e.data[u]-t.data[u])+Math.abs(e.data[u+1]-t.data[u+1])+Math.abs(e.data[u+2]-t.data[u+2])+Math.abs(e.data[u+3]-t.data[u+3]),w>r&&(e.data[u]=t.data[u],e.data[u+1]=t.data[u+1],e.data[u+2]=t.data[u+2],e.data[u+3]=t.data[u+3]);return e};this.loadImage=function(n,t,i){var r=new Image;i&&i.corsenabled&&(r.crossOrigin="Anonymous");r.onload=function(){var n=document.createElement("canvas"),i;n.width=r.width;n.height=r.height;i=n.getContext("2d");i.drawImage(r,0,0);t(n)};r.src=n};this.getImgdata=function(n){var t=n.getContext("2d");return t.getImageData(0,0,n.width,n.height)};this.specpalette=[{r:0,g:0,b:0,a:255},{r:128,g:128,b:128,a:255},{r:0,g:0,b:128,a:255},{r:64,g:64,b:128,a:255},{r:192,g:192,b:192,a:255},{r:255,g:255,b:255,a:255},{r:128,g:128,b:192,a:255},{r:0,g:0,b:192,a:255},{r:128,g:0,b:0,a:255},{r:128,g:64,b:64,a:255},{r:128,g:0,b:128,a:255},{r:168,g:168,b:168,a:255},{r:192,g:128,b:128,a:255},{r:192,g:0,b:0,a:255},{r:255,g:255,b:255,a:255},{r:0,g:128,b:0,a:255}];this.drawLayers=function(t,i,r,u){var c,l,e,o,s,f,h,a;r=r||1;u?(f=document.getElementById(u),f||(f=document.createElement("div"),f.id=u,document.body.appendChild(f))):(f=document.createElement("div"),document.body.appendChild(f));for(s in t)if(t.hasOwnProperty(s)){for(c=t[s][0].length,l=t[s].length,h=document.createElement("canvas"),h.width=c*r,h.height=l*r,a=h.getContext("2d"),o=0;o<l;o++)for(e=0;e<c;e++)a.fillStyle=n.torgbastr(i[t[s][o][e]%i.length]),a.fillRect(e*r,o*r,r,r);f.appendChild(h)}}}typeof define=="function"&&define.amd?define(function(){return new n}):typeof module!="undefined"?module.exports=new n:typeof self!="undefined"?self.ImageTracer=new n:window.ImageTracer=new n})();
```
